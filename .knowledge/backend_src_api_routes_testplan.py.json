{"is_source_file": true, "format": "Python", "description": "This file defines API routes for importing and retrieving test plan data, including endpoints for uploading test plan files in CSV or XLSX formats, listing test suites, and paginating test cases within a suite. It uses FastAPI, SQLAlchemy ORM, and various helper functions for parsing and normalizing input data.", "external_files": ["src/api/db", "src/api/models", "src/api/schemas", "src/api/testplan_import"], "external_methods": ["get_db", "Suite", "TestCase", "ImportTestPlanResponse", "SuitesListResponse", "TestCasesPageResponse", "dumps_json_text", "normalize_rows", "parse_csv", "parse_xlsx"], "published": ["import_testplan", "list_suites", "list_suite_testcases"], "classes": [], "methods": [{"name": "str _require_supported_filename(filename: str)", "description": "Validates the uploaded file's extension, ensuring it is either CSV or XLSX, raising an HTTP 400 error otherwise.", "scope": "", "scopeKind": ""}, {"name": "ImportTestPlanResponse import_testplan( file: UploadFile = File(..., description=\"CSV or XLSX file uploaded as multipart/form-data under field name 'file'.\"), db: Session = Depends(get_db), )", "description": "Handles file uploads of test plans in CSV or XLSX format, parses and normalizes data, and inserts or updates suites and test cases in the database, returning a summary and preview.", "scope": "", "scopeKind": ""}, {"name": "SuitesListResponse list_suites(db: Session = Depends(get_db))", "description": "Retrieves a list of all test suites along with their test case counts, sorted by creation date.", "scope": "", "scopeKind": ""}, {"name": "TestCasesPageResponse list_suite_testcases( suite_id: int, page: int = Query(1, ge=1, description=\"1-based page number.\"), page_size: int = Query(20, ge=1, le=200, description=\"Page size (max 200).\"), category: Optional[str] = Query(None, description=\"Filter by exact category.\"), priority: Optional[str] = Query(None, description=\"Filter by exact priority.\"), search: Optional[str] = Query(None, min_length=1, description=\"Search in title/description/case_id (contains, case-insensitive).\"), db: Session = Depends(get_db), )", "description": "Provides paginated and filterable listing of test cases within a specific suite, supporting filtering by category, priority, and search terms.", "scope": "", "scopeKind": ""}], "calls": ["select", "db.execute", "db.add", "db.flush", "db.commit", "db.rollback", "scalar_one_or_none", "scalar_one", "scalars", "list"], "search-terms": ["import_testplan", "list_suites", "list_suite_testcases", "test plan import", "test suites", "test cases pagination", "CSV XLSX upload"], "state": 2, "file_id": 9, "knowledge_revision": 21, "git_revision": "30d78b615f53bdbe40b88a50e350b9c9ce34c41c", "ctags": [{"_type": "tag", "name": "_MAX_UPLOAD_BYTES", "path": "/home/kavia/workspace/code-generation/test-item-classifier-7040-7051/backend/src/api/routes_testplan.py", "pattern": "/^_MAX_UPLOAD_BYTES = 10 * 1024 * 1024  # 10MB safe default$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_require_supported_filename", "path": "/home/kavia/workspace/code-generation/test-item-classifier-7040-7051/backend/src/api/routes_testplan.py", "pattern": "/^def _require_supported_filename(filename: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(filename: str)"}, {"_type": "tag", "name": "import_testplan", "path": "/home/kavia/workspace/code-generation/test-item-classifier-7040-7051/backend/src/api/routes_testplan.py", "pattern": "/^async def import_testplan($/", "language": "Python", "typeref": "typename:ImportTestPlanResponse", "kind": "function", "signature": "( file: UploadFile = File(..., description=\"CSV or XLSX file uploaded as multipart/form-data under field name 'file'.\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "list_suite_testcases", "path": "/home/kavia/workspace/code-generation/test-item-classifier-7040-7051/backend/src/api/routes_testplan.py", "pattern": "/^def list_suite_testcases($/", "language": "Python", "typeref": "typename:TestCasesPageResponse", "kind": "function", "signature": "( suite_id: int, page: int = Query(1, ge=1, description=\"1-based page number.\"), page_size: int = Query(20, ge=1, le=200, description=\"Page size (max 200).\"), category: Optional[str] = Query(None, description=\"Filter by exact category.\"), priority: Optional[str] = Query(None, description=\"Filter by exact priority.\"), search: Optional[str] = Query(None, min_length=1, description=\"Search in title/description/case_id (contains, case-insensitive).\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "list_suites", "path": "/home/kavia/workspace/code-generation/test-item-classifier-7040-7051/backend/src/api/routes_testplan.py", "pattern": "/^def list_suites(db: Session = Depends(get_db)) -> SuitesListResponse:$/", "language": "Python", "typeref": "typename:SuitesListResponse", "kind": "function", "signature": "(db: Session = Depends(get_db))"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/test-item-classifier-7040-7051/backend/src/api/routes_testplan.py", "pattern": "/^router = APIRouter(tags=[\"Test Plans\"])$/", "language": "Python", "kind": "variable"}], "hash": "043345f9dc20e18c78e7128e4697f568", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routes_testplan.py", "fields": [{"name": "_MAX_UPLOAD_BYTES = 10 * 1024 * 1024  # 10MB safe default", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"Test Plans\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"21": "30d78b615f53bdbe40b88a50e350b9c9ce34c41c"}]}