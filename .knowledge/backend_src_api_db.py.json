{"is_source_file": true, "format": "Python", "description": "This file provides database utility functions for a FastAPI backend, including environment-based MySQL URL construction, engine/session management, and database session dependency injection.", "external_files": ["sqlalchemy", "os", "urllib.parse"], "external_methods": ["create_engine", "sessionmaker", "urlparse"], "published": ["get_engine", "get_db"], "classes": [], "methods": [{"name": "_build_mysql_url", "description": "Constructs a MySQL SQLAlchemy URL from environment variables, supporting both full DSN and host:port formats."}, {"name": "get_engine", "description": "Returns a singleton SQLAlchemy Engine configured from environment variables."}, {"name": "get_db", "description": "Provides a FastAPI dependency that yields a SQLAlchemy session and ensures its closure after use."}], "calls": ["create_engine", "sessionmaker", "urlparse", "get_engine"], "search-terms": ["SQLAlchemy engine", "FastAPI database dependency", "MySQL URL construction", "environment variable database config"], "state": 2, "file_id": 5, "knowledge_revision": 27, "git_revision": "77eabda4c105ec73869f63e9371a6179be5e1318", "revision_history": [{"16": "30d78b615f53bdbe40b88a50e350b9c9ce34c41c"}, {"22": "77eabda4c105ec73869f63e9371a6179be5e1318"}, {"27": "77eabda4c105ec73869f63e9371a6179be5e1318"}], "ctags": [], "filename": "backend/src/api/db.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/test-item-classifier-7040-7051.git:kavia-main"}